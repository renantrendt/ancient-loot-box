<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ancient Loot Box - Console Commands</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
        }
        .command-card {
            background-color: #34495e;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        h1, h2 {
            color: #f1c40f;
        }
        code {
            background-color: #2c3e50;
            padding: 5px;
            border-radius: 5px;
            font-family: monospace;
            display: block;
            margin: 10px 0;
        }
        .note {
            color: #e74c3c;
            font-style: italic;
        }
        button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #c0392b;
        }
    </style>
</head>
<body>
    <h1>Ancient Loot Box - Console Commands</h1>
    <p>This page provides easy access to console commands for managing your inventory.</p>
    
    <div class="command-card">
        <h2>Remove Items</h2>
        <p>Remove items from your inventory:</p>
        <code>lootBoxConsole.removeItem("Item Name", quantity);</code>
        <p>Examples:</p>
        <button onclick="executeCommand('removeItem', 'Beer', 1)">Remove 1 Beer</button>
        <button onclick="executeCommand('removeItem', 'Helmet', 2)">Remove 2 Helmets</button>
        <button onclick="executeCommand('removeItem', 'Sword', 1)">Remove 1 Sword</button>
        <button onclick="executeCommand('removeItem', 'Diablo Sword', 1)">Remove 1 Diablo Sword</button>
    </div>
    
    <div class="command-card">
        <h2>Add Items</h2>
        <p>Add items to your inventory:</p>
        <code>lootBoxConsole.addItem("Item Name", "rarity", quantity);</code>
        <p>Examples:</p>
        <button onclick="executeCommand('addItem', 'Beer', 'common', 5)">Add 5 Beers</button>
        <button onclick="executeCommand('addItem', 'Helmet', 'rare', 3)">Add 3 Helmets</button>
        <button onclick="executeCommand('addItem', 'Sword', 'rare', 2)">Add 2 Swords</button>
        <button onclick="executeCommand('addItem', 'Diablo Sword', 'mythic', 1)">Add 1 Diablo Sword</button>
        <button onclick="executeCommand('addItem', 'N.U.K.E', 'mythic', 1)">Add 1 N.U.K.E</button>
    </div>
    
    <div class="command-card">
        <h2>Clear Inventory</h2>
        <p>Remove all items from your inventory:</p>
        <code>lootBoxConsole.clearInventory();</code>
        <button onclick="executeCommand('clearInventory')">Clear Inventory</button>
        <p class="note">Warning: This will remove ALL items from your inventory!</p>
    </div>
    
    <div class="command-card">
        <h2>Debug Tools</h2>
        <p>Debug and inspect your inventory:</p>
        <code>lootBoxConsole.debug();</code>
        <button onclick="executeCommand('debug')">Show Debug Info</button>
        <p class="note">This will display detailed inventory information in the main game console.</p>
    </div>
    
    <div id="result" class="command-card" style="display: none;">
        <h2>Command Result</h2>
        <div id="result-content"></div>
    </div>
    
    <script>
        // FIXED Console Commands - Use the lootBoxConsole object from the main game
        
        window.lootBoxConsole = {
            removeItem: async function(itemName, count = 1) {
                try {
                    // Access the main game's lootBoxConsole
                    const mainConsole = window.opener ? window.opener.lootBoxConsole : window.parent.lootBoxConsole;
                    
                    if (!mainConsole) {
                        return showResult(`Error: Cannot access game console. Make sure the game is open in another tab.`);
                    }
                    
                    // Use the fixed removeItem function (now async)
                    const result = await mainConsole.removeItem(itemName, count);
                    
                    if (result) {
                        showResult(`‚úÖ Successfully removed ${count} ${itemName}(s) from your inventory`);
                    } else {
                        showResult(`‚ùå Failed to remove ${itemName} - check console for details`);
                    }
                    
                    return result;
                } catch (error) {
                    showResult(`Error: ${error.message}`);
                    return false;
                }
            },
            
            addItem: async function(itemName, rarity, count = 1) {
                try {
                    // Access the main game's lootBoxConsole
                    const mainConsole = window.opener ? window.opener.lootBoxConsole : window.parent.lootBoxConsole;
                    
                    if (!mainConsole) {
                        return showResult(`Error: Cannot access game console. Make sure the game is open in another tab.`);
                    }
                    
                    // Use the fixed addItem function (now async)
                    const result = await mainConsole.addItem(itemName, rarity, count);
                    
                    if (result) {
                        showResult(`‚úÖ Successfully added ${count} ${itemName}(s) to your inventory`);
                    } else {
                        showResult(`‚ùå Failed to add ${itemName} - check console for details`);
                    }
                    
                    return result;
                } catch (error) {
                    showResult(`Error: ${error.message}`);
                    return false;
                }
            },
            
            clearInventory: async function() {
                try {
                    // Access the main game's lootBoxConsole
                    const mainConsole = window.opener ? window.opener.lootBoxConsole : window.parent.lootBoxConsole;
                    
                    if (!mainConsole) {
                        return showResult(`Error: Cannot access game console. Make sure the game is open in another tab.`);
                    }
                    
                    // Use the fixed clearInventory function (now async)
                    const result = await mainConsole.clearInventory();
                    
                    if (result) {
                        showResult(`‚úÖ Successfully cleared your inventory`);
                    } else {
                        showResult(`‚ùå Failed to clear inventory - check console for details`);
                    }
                    
                    return result;
                } catch (error) {
                    showResult(`Error: ${error.message}`);
                    return false;
                }
            },
            
            debug: function() {
                try {
                    // Access the main game's lootBoxConsole
                    const mainConsole = window.opener ? window.opener.lootBoxConsole : window.parent.lootBoxConsole;
                    
                    if (!mainConsole) {
                        return showResult(`Error: Cannot access game console. Make sure the game is open in another tab.`);
                    }
                    
                    // Use the debug function (not async)
                    const result = mainConsole.debug();
                    showResult(`üîç Debug info displayed in main game console`);
                    
                    return result;
                } catch (error) {
                    showResult(`Error: ${error.message}`);
                    return false;
                }
            }
        };
        
        async function executeCommand(command, ...args) {
            if (lootBoxConsole[command]) {
                try {
                    // Handle async functions
                    const result = await lootBoxConsole[command](...args);
                    // Result messages are already handled by the individual functions
                } catch (error) {
                    showResult(`Error: ${error.message}`);
                }
            } else {
                showResult(`Error: Command "${command}" not found`);
            }
        }
        
        function showResult(message) {
            const resultDiv = document.getElementById('result');
            const resultContent = document.getElementById('result-content');
            resultDiv.style.display = 'block';
            resultContent.textContent = message;
            console.log(message);
            return false;
        }
    </script>
</body>
</html>
